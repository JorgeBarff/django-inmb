<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <title>Registro de Usuario</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <script>
      function togglePasswordFields() {
        var checkbox = document.getElementById("id_generar_password");
        var passwordFields = document.getElementById("password-fields");

        if (checkbox.checked) {
          passwordFields.style.display = "none"; // Oculta los campos de contraseña
        } else {
          passwordFields.style.display = "block"; // Muestra los campos de contraseña
        }
      }
    </script>
  </head>
  <body class="container mt-5">
    <h2 class="text-center">Registro de Usuario</h2>

    {% if messages %} {% for message in messages %}
    <div class="alert alert-{{ message.tags }}">{{ message }}</div>
    {% endfor %} {% endif %}

    <form method="post" class="mt-3" enctype="multipart/form-data">
      {% csrf_token %}

      <div class="mb-3">
        <label for="{{ form.username.id_for_label }}" class="form-label"
          >Username</label
        >
        {{ form.username }}
      </div>

      <div class="mb-3">
        <label for="{{ form.email.id_for_label }}" class="form-label"
          >Email</label
        >
        {{ form.email }}
      </div>

      <div class="mb-3">
        <label for="{{ form.telefono.id_for_label }}" class="form-label"
          >Teléfono</label
        >
        {{ form.telefono }}
      </div>

      <div class="mb-3">
        <label for="{{ form.nombres.id_for_label }}" class="form-label"
          >Nombres</label
        >
        {{ form.nombres }}
      </div>

      <div class="mb-3">
        <label for="{{ form.apellidos.id_for_label }}" class="form-label"
          >Apellidos</label
        >
        {{ form.apellidos }}
      </div>

      <div class="mb-3">
        <label for="{{ form.foto_perfil.id_for_label }}" class="form-label"
          >Foto de perfil</label
        >
        {{ form.foto_perfil }}
      </div>

      <div class="form-check">
        {{ form.generar_password }}
        <label for="{{ form.generar_password.id_for_label }}"
          >Generar contraseña automáticamente</label
        >
      </div>

      <div id="password-fields">
        <div class="mb-3">
          <label for="{{ form.password1.id_for_label }}" class="form-label"
            >Contraseña</label
          >
          {{ form.password1 }}
        </div>

        <div class="mb-3">
          <label for="{{ form.password2.id_for_label }}" class="form-label"
            >Confirmar Contraseña</label
          >
          {{ form.password2 }}
        </div>
      </div>

      <button type="submit" class="btn btn-success">Registrarse</button>
    </form>

    <p class="mt-3">
      ¿Ya tienes cuenta? <a href="{% url 'login' %}">Inicia sesión aquí</a>
    </p>

    <script>
      document
        .getElementById("id_generar_password")
        .addEventListener("change", togglePasswordFields);
      togglePasswordFields(); // Llamar la función al cargar la página
    </script>
  </body>
</html>
